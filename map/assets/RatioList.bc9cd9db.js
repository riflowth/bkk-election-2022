import{F as y,p as C,h as A,m as g,j as s,a as L,_ as b,D as v,y as F,b as u,P as w,S as N,E as O}from"./index.f9f0d765.js";import{D as I}from"./DistrictTooltip.bc9fb058.js";const T=6;function P({district:l,isInProgress:o,isLive:m,onClick:h}){const n=y(C),i=A(null),[a,E]=g(!1);if(!n)return s(L,{});const[p,c]=g(!1),d=l.voting.progress||0,f=[{percent:d/100,color:"#FFFFFF",strip:m},{percent:1-d/100,color:"rgba(255, 255, 255, 0.2)"}],x=b(()=>{const e=l.voting.result.reduce((t,r)=>{if(!r.count||!l.voting.totalVotes)return t;const D=r.count/l.voting.totalVotes;return t.length==T?(t[t.length-1].percent+=D,t[t.length-1].color=v,t):[...t,{percent:D||0,color:n.candidateMap[r.candidateId].color}]},[]);return e.length==0?[{percent:100,color:v}]:e},[l]);return F(()=>{var e,t;i.current&&E(i.current.offsetTop-(((e=i.current.parentElement)==null?void 0:e.scrollTop)||0)<(((t=i.current.parentElement)==null?void 0:t.clientHeight)||0)/2)},[p]),u("div",{class:`grid ${o?"grid-cols-3 md:grid-cols-6":"grid-cols-2 md:grid-cols-5"} typo-u4 gap-x-4 gap-y-1 md:gap-8 hover:bg-white/20 items-center py-1`,onMouseOver:()=>c(!0),onMouseLeave:()=>c(!1),ref:i,onClick:h,children:[s("div",{class:"font-semibold",children:l.name}),u("div",{class:o?"text-left":"text-right md:text-left",children:[l.voting.eligiblePopulation.toLocaleString(),"\xA0(",(l.voting.eligiblePopulation/n.electionData.total.eligiblePopulation).toLocaleString(void 0,{style:"percent",minimumFractionDigits:1}),")"]}),u("div",{class:`${o?"col-span-3":"col-span-2 md:col-span-3"} relative flex h-full items-center order-last md:order-3`,children:[s("div",{className:"flex grow order-last md:order-3",children:s(w,{border:"1px solid #000000",className:"h-[10px]",progressItems:x})}),s(I,{show:p,district:l,className:`${a?"top-full":"bottom-full"}`,pointUp:a,topCandidateDisplay:T-1})]}),o&&m&&u("div",{class:"flex md:basis-2/12 gap-2 order-4",children:[d.toFixed(1),"%",s(w,{progressItems:f,className:"h-1 md:h-2"})]})]})}s("svg",{width:"10",height:"6",viewBox:"0 0 10 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s("path",{d:"M1 1L5 5L9 1",stroke:"white"})});function R({onDistrictClick:l}){const o=y(C),[m,h]=g(!1);if(!o)return s(L,{});const[n,i]=g("name"),[a,E]=g(!1),p=[{text:"\u0E40\u0E02\u0E15",className:"cursor-pointer",sortType:"name"},{text:"\u0E1C\u0E39\u0E49\u0E21\u0E35\u0E2A\u0E34\u0E17\u0E18\u0E34\u0E4C\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E15\u0E31\u0E49\u0E07",className:"cursor-pointer whitespace-nowrap"+(o.electionData.total.progress?"":" text-right md:text-left"),sortType:"eligible"},{text:"\u0E1C\u0E25\u0E01\u0E32\u0E23\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E15\u0E31\u0E49\u0E07",className:"col-span-3 grow hidden md:flex",children:""},{text:"\u0E19\u0E31\u0E1A\u0E04\u0E30\u0E41\u0E19\u0E19\u0E41\u0E25\u0E49\u0E27",className:"cursor-pointer whitespace-nowrap text-right",sortType:"percent"}];o.electionData.total.progress||p.pop();const c=b(()=>a?-1:1,[a]),d=e=>e==="eligible"||e==="percent",f=b(()=>{const e=o.electionData.districts;switch(n){case"eligible":return e.sort((t,r)=>(t.voting.eligiblePopulation-r.voting.eligiblePopulation)*c);case"percent":return e.sort((t,r)=>((t.voting.progress||100)-(r.voting.progress||100))*c);case"name":default:return e.sort((t,r)=>t.name.localeCompare(r.name)*c)}},[o,n,c]),x=e=>{e&&(e===n?E(!a):(i(e),E(d(e))))};return u("div",{class:"flex flex-col flex-1 relative overflow-y-hidden",children:[s("div",{class:`grid ${o.electionData.total.progress?"grid-cols-3 md:grid-cols-6":"grid-cols-2 md:grid-cols-5"} typo-u4 gap-4 gap-y-1 md:gap-8 border-b border-white/40 pb-1`,children:p.map(e=>s(N,{headerText:e.text,className:e.className,isActive:e.sortType===n,descending:a,headerOnClick:()=>x(e.sortType),children:e.children}))}),u("div",{class:"flex flex-col pt-2 gap-2 overflow-y-auto hide-scrollbar",onScroll:e=>{const t=e.target;h(t.scrollHeight-t.scrollTop-t.clientHeight<1)},children:[s("div",{class:`absolute w-full h-11 bg-gradient-to-t z-10 from-black to-black/0 bottom-0 pointer-events-none ${m&&"hidden"}`}),f.map((e,t)=>s(P,{district:e,isInProgress:o.electionData.total.progress!==void 0,isLive:o.electionData.type==O.Live,onClick:()=>l(e)}))]})]})}export{R as default};
